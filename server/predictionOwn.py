mean = [1.265806509107129e-10, 1.234598992236202e-10, 1.0446582888842214e-10, 3.017293703821487e-10, 1.3585883273352638e-11, 4.644566526418005e-11, 2.936851442153835e-11, 3.884286237909138e-11, 1.9564828481524117e-10, 1.1316903393462138e-11, 2.0761865924254747e-11, 1.6706797595957206e-11, 2.2868227398600057e-11, 2.693572161515697e-11, 8.111169672876903e-12, 2.9332413915115205e-11, 1.9754548375879702e-11, 3.509772614905314e-11, 1.7956399585565073e-11, 1.1681768264177081e-11, 1.191048214874309e-10, 4.842936109420425e-11, 1.8069359941149872e-10, 3.364607004295041e-11]
std = [1.415132125322026e-10, 4.871687971635575e-10, 8.118776288812661e-11, 1.3405637391350492e-09, 9.837578908041292e-12, 5.022267209039602e-11, 7.566557049106267e-11, 3.7995486852722286e-11, 8.621344714948398e-10, 1.4829361909731517e-11, 2.00602595323893e-11, 3.152021465802373e-11, 2.0399688581690632e-11, 1.1280794050198452e-10, 7.861855043286294e-12, 2.1213802333791544e-11, 2.1482100662364084e-11, 2.5077714312711127e-11, 7.111457340967093e-11, 7.827439046707292e-12, 1.954177585648657e-10, 6.770998400275297e-11, 2.512188167257723e-10, 1.3242712109448045e-10]
signal = [2.5430560442823915e-10,
 3.7189198297795546e-11,
 5.21947682418557e-11,
 8.167675921974564e-11,
 2.525522279796593e-11,
 2.6560706959967865e-11,
 1.9587326788394784e-11,
 9.850981164205844e-12,
 1.4909157064441998e-11,
 1.9909569271630964e-11,
 6.328572534604874e-12,
 2.6585253974416884e-12,
 1.2530967559590904e-12,
 8.32927376838027e-12,
 8.136164773779901e-12,
 1.0268257470269e-11,
 9.994800934213008e-12,
 2.290739050825393e-12,
 8.639868742051378e-12,
 1.7202068451395208e-11,
 5.392025921703476e-12,
 2.651301571167004e-12,
 8.857633750601567e-12,
 8.271100744827764e-12,
 1.1531867262295096e-11,
 1.8054137722308088e-11,
 1.8645896254061133e-11,
 1.5395467424172622e-11,
 4.344733070608016e-11,
 3.786937904454754e-11,
 3.388719518989891e-10,
 2.7161646238128805e-10,
 1.0561228906425768e-10,
 9.239062047496742e-11,
 3.901800883391836e-11,
 7.592343993307988e-11,
 2.9427638442910785e-11,
 2.395975494414867e-11,
 7.986019335632714e-12,
 1.3485073312061936e-11,
 1.1045764087689383e-11,
 3.673565001080321e-12,
 1.1995234401606849e-12,
 5.589046047353895e-12,
 8.136470925187479e-12,
 3.2375513315416585e-12,
 2.5657655862272584e-12,
 2.7797234586151347e-12,
 1.108575749566879e-11,
 5.517325802379313e-12,
 1.6663848003467892e-12,
 2.573024702016788e-12,
 4.440272519130807e-12,
 8.816322349138965e-12,
 9.279580236735278e-12,
 7.598697198804764e-12,
 1.868665667816054e-11,
 1.598731989019449e-11,
 4.008117728472352e-11,
 1.4356965659795983e-10,
 9.9623443114618e-11,
 3.4966595940310294e-11,
 1.8901407196119213e-11,
 4.8008869559336716e-11,
 1.3686682452399198e-11,
 1.4872407072144663e-11,
 1.910172646770568e-11,
 1.3796800443919612e-11,
 1.064575034093018e-11,
 1.0618229772514036e-11,
 6.232998136453867e-12,
 9.157137402496128e-12,
 1.075411525588718e-11,
 4.6839863010071554e-12,
 2.0820187548040705e-12,
 1.0327062410587392e-12,
 7.032013836794225e-12,
 7.075558011794277e-12,
 6.249044808851408e-12,
 6.351108204459654e-12,
 2.662778246875861e-12,
 1.0728034295818976e-11,
 1.1999757430961431e-11,
 6.1786600955659495e-12,
 2.1220988533668878e-12,
 6.430244413702418e-12,
 5.760460243370971e-12,
 1.000272816542623e-11,
 1.2310739495080171e-11,
 9.745866589157899e-12,
 9.063906218263e-12,
 1.373186100139091e-11,
 1.3822319007363135e-11,
 6.135066874622545e-11,
 4.8082618981521525e-11,
 2.3477468352309924e-11,
 2.199724728224605e-11,
 1.3927844226062275e-11,
 1.7901581578398317e-11,
 1.2221646922834032e-11,
 1.1304011903591471e-11,
 5.873507610185118e-12,
 7.69117666107147e-12,
 7.814730957316967e-12,
 2.735175397065284e-12,
 9.652126001940562e-13,
 5.335840429584989e-12,
 7.104078162032054e-12,
 3.390255792779443e-12,
 1.9875890173383432e-12,
 2.211710182792632e-12,
 9.772689075081498e-12,
 7.116215639976685e-12,
 9.059951974296928e-13,
 2.07145486077782e-12,
 3.608640903201721e-12,
 9.49757390500068e-12,
 7.408207440594542e-12,
 5.365698893901837e-12,
 1.0642285268037576e-11,
 1.065776047708599e-11,
 1.351052790567556e-11,
 3.4206317921151035e-11,
 2.2092430045878427e-11,
 1.2708741940775102e-11,
 1.0671845042256068e-11,
 1.5255024630055412e-11,
 8.94421873586231e-12,
 9.770830206341506e-12,
 1.3630589585586155e-11,
 1.2900626517704631e-11,
 1.0963174225066967e-11,
 7.758277088235776e-12,
 5.81958749481061e-12,
 1.0318369296994294e-11,
 1.0326529524966149e-11,
 5.773900311284897e-12,
 1.7053260588607053e-12,
 1.0641241786520346e-12,
 6.694957337968339e-12,
 4.798445889459335e-12,
 4.306946476983854e-12,
 4.390287318684475e-12,
 2.6504391064718672e-12,
 7.100955353437812e-12,
 9.913045132727796e-12,
 5.999659726520348e-12,
 1.720797472780513e-12,
 4.607502385520452e-12,
 5.164030651172655e-12,
 1.3584999894418596e-11,
 1.1598364133374075e-11,
 8.916938471834901e-12,
 7.34312466321283e-12,
 1.4056070348201662e-11,
 1.0822003832684188e-11,
 1.6344519061295834e-11,
 1.6023872264449938e-11,
 1.0749743420689452e-11,
 1.047639170836707e-11,
 8.82053080238073e-12,
 1.5600906524594173e-11,
 1.0923251204179563e-11,
 9.66188614501653e-12,
 4.4927969164950116e-12,
 7.825492072545285e-12,
 1.1211064126633535e-11,
 2.878890365005779e-12,
 9.863472361996234e-13,
 5.18139736880932e-12,
 4.818399452937497e-12,
 2.61668937186476e-12,
 1.2274781001159077e-12,
 1.4144157792459473e-12,
 6.525028947893026e-12,
 5.325899592100838e-12,
 8.603090342756525e-13,
 1.371985967512553e-12,
 3.6230383625452067e-12,
 7.818932129707672e-12,
 7.364649883743142e-12,
 4.195471903555013e-12,
 1.1112798275139362e-11,
 1.0625427117765969e-11,
 1.3824437444443714e-11,
 2.6155447814375057e-11,
 1.6934064389253128e-11,
 9.03841201075254e-12,
 7.820947602520462e-12,
 1.8866393758751557e-11,
 7.170205561273174e-12,
 4.135800372556884e-11,
 7.982954197285662e-11,
 9.1597047130721e-12,
 7.701594592608389e-11,
 7.6789928648233e-12,
 1.3618607272839049e-11,
 1.637093038756241e-11,
 8.188309911046299e-12,
 1.2612197095245599e-11,
 1.5957508321553797e-12,
 1.1264752161746462e-12,
 7.033616741305993e-12,
 3.898239032483949e-12,
 5.401731324040707e-12,
 6.562152516310517e-12,
 2.11555241966168e-12,
 7.923361752435479e-12,
 1.5279336190571946e-11,
 9.220523325866422e-12,
 1.975931879131044e-12,
 4.3669976272012146e-12,
 1.1822384199810202e-11,
 6.206978690053771e-11,
 1.5939565241381238e-11,
 3.83534614683612e-11,
 1.1820797820497774e-11,
 2.053857708728023e-10,
 2.573862739067701e-11,
 2.5222867603056008e-11,
 5.982599886085081e-11,
 2.119382825131259e-11,
 1.2745297349079988e-11,
 7.666401069597241e-12,
 2.4676311836451346e-10,
 1.5965428441119395e-11,
 4.3158833327793797e-11,
 4.4758645695075346e-12,
 2.050493342526589e-11,
 4.819378735804623e-11,
 3.5572860210470854e-12,
 1.0559823528565352e-12,
 5.290023940382981e-12,
 3.909192401129127e-12,
 1.930531993268378e-12,
 1.154105346781012e-12,
 1.367200281301337e-12,
 1.0505038270812218e-11,
 4.816752118417284e-12,
 1.0174269804697218e-12,
 1.3497992198016157e-12,
 4.206925242381487e-12,
 8.881208897044541e-12,
 2.200525817806679e-11,
 5.383520093605201e-12,
 6.241956847300396e-11,
 2.6954297907466485e-11,
 1.6015001729260357e-10,
 3.6494418118980573e-10,
 1.8548148349676624e-10,
 2.121311269666828e-11,
 6.196627715660252e-12,
 4.0001898136151086e-11,
 1.0122367602054543e-11,
 1.0018875505032403e-10,
 1.286371324730544e-10,
 2.7311549965158652e-11,
 1.758132207954961e-10,
 8.707997154020756e-12,
 2.03003036124204e-11,
 7.594329636522035e-11,
 2.822960252977256e-11,
 6.514044514627479e-11,
 2.567815388031502e-12,
 2.888422316014793e-12,
 3.0434144595689756e-11,
 1.2154548936021078e-11,
 1.858950085337273e-11,
 3.1317187172415336e-11,
 6.038383460282795e-12,
 4.246853301747281e-11,
 4.998100459677762e-11,
 4.521387867116648e-11,
 3.1268858300636304e-12,
 4.156565536263196e-12,
 2.397595731063709e-11,
 4.24170452513251e-10,
 6.568469264594015e-11,
 1.1165982460189678e-10,
 1.5038692238365197e-11,
 5.01644977261921e-10,
 5.871803867310006e-11,
 7.205927680604423e-11,
 1.2580239375202477e-10,
 4.607084631148879e-11,
 2.343793337048221e-11,
 1.141167095744344e-11,
 5.170148636509341e-10,
 3.892239845841536e-11,
 6.893233963677311e-11,
 4.713242561464923e-12,
 5.3960033248863536e-11,
 2.586502996133951e-10,
 8.456136503418169e-12,
 2.6065403323117165e-12,
 2.4315135850819275e-11,
 1.2219762816744195e-11,
 4.48164479375102e-12,
 2.933125185519629e-12,
 4.274140525565731e-12]


import joblib
import sys
import pandas as pd
import re


val = sys.argv[1]
model = sys.argv[2]

signal = re.split(', |\[|\]', val)
signal = signal[1:len(signal)-1]
signal = list(map(float, signal))

channels = sys.argv[3]
channels = re.split(',|\[|\]', channels)
channels = channels[1:len(channels)-1]
to_select = list(map(int, channels))

mean = sys.argv[4]
mean = re.split(',|\[|\]', mean)
mean = mean[1:len(mean)-1]
mean = list(map(float, mean))

std = sys.argv[5]
#std = '[128,  68,   8, 265, 101, 168, 162, 153, 297, 176, 104, 131, 129, 127,115, 126, 177,  79, 262, 103, 108, 132, 157, 142, 166, 289, 268,  87,  167, 114, 171, 295, 107,  80, 158, 140,  97,  71, 293, 139, 148, 169, 118, 141, 113,  66, 174, 175, 173,  74, 298, 125, 136, 147,  65, 152, 109,  69, 105,  81,  77, 102,  85,  98,  76, 178, 111,  67,  72, 106]'
std = re.split(',|\[|\]', std)
std = std[1:len(std)-1]
std = list(map(float, std))

sign = []
for index in to_select:
    sign.append(signal[index])


############################################## STANDARDIZATION ################################################
subtr = []
for a, b in zip(sign, mean):
    subtr.append(a-b)

final = []
for a, b in zip(subtr, std):
    final.append(a/b)
###############################################################################################################

df = pd.DataFrame()
df = df.append([final])


mdl = joblib.load("D:\\prova_app_tesi\\server\\new_model\\"+model)
prediction = mdl.predict(pd.DataFrame(df))
print(prediction)
